From 90b1f2fe02ca14d8b07760f06824cef482dabe0b Mon Sep 17 00:00:00 2001
From: "H. Vetinari" <h.vetinari@gmx.com>
Date: Sun, 4 Sep 2022 19:42:16 +0200
Subject: [PATCH 3/7] adapt to name of protobuf lib on windows

---
 python/setup.py | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/python/setup.py b/python/setup.py
index 73b4aeffb..0ffc118e2 100755
--- a/python/setup.py
+++ b/python/setup.py
@@ -337,7 +337,8 @@ if __name__ == '__main__':
           extra_objects += list(
               glob.iglob('../third_party/abseil-cpp/absl/**/*.a'))
     else:
-      libraries = ['protobuf']
+      # our windows builds don't follow standard windows naming (i.e. have a lib prefix)
+      libraries = ['protobuf'] if sys.platform != 'win32' else ['libprotobuf']
       if HasLibraryDirsOpt():
         library_dirs = None
       elif os.path.exists('../bazel-bin/src/google/protobuf/libprotobuf.a'):
